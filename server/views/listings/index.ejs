<%- include("../shared/_header") %>

<div class="container mt-5">
  <h1>Listings</h1>

  <hr class="my-5" />

  <a href="/listings/new">Create a new listing</a>

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Address</th>
        <th>Price</th>
        <th>Description</th>
        <th>Property Type</th>
        <th>Bedrooms</th>
        <th>Bathrooms</th>
        <th>Square Footage</th>
        <th>Lot Size</th>
        <th>Year Built</th>
        <th>Status</th>
        <th>Tags</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% if (listings && listings.length > 0) { %> <% listings.forEach(({ id,
      address, price, description, propertyType, bedrooms, bathrooms,
      squareFootage, lotSize, yearBuilt, status, tags }) => { %>
      <tr>
        <td><%= address %></td>
        <td><%= price %></td>
        <td><%= description %></td>
        <td><%= propertyType %></td>
        <td><%= bedrooms %></td>
        <td><%= bathrooms %></td>
        <td><%= squareFootage %></td>
        <td><%= lotSize %></td>
        <td><%= yearBuilt %></td>
        <td><%= status %></td>

        <td><%= tags.join(', ') %></td>

        <td>
          <a href="/listings/<%= id %>">view</a> |
          <a href="/listings/<%= id %>/edit">edit</a> |
          <form
            action="/listings/<%= id %>"
            method="post"
            onsubmit="return confirm('Are you sure you want to delete this listing?')"
          >
            <input type="hidden" name="_method" value="delete" />
            <button class="standard-link" type="submit">delete</button>
          </form>
        </td>
      </tr>
      <% }) %> <% } %>
    </tbody>
  </table>
</div>

<%- include("../shared/_footer") %>
